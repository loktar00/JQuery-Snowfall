Date.now||(Date.now=function(){return(new Date).getTime()}),function(){"use strict";for(var e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i){var t=e[i];window.requestAnimationFrame=window[t+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var i=Date.now(),t=Math.max(n+16,i);return setTimeout(function(){e(n=t)},t-i)},window.cancelAnimationFrame=clearTimeout}}();var snowFall=function(){function e(){var e={flakeCount:35,flakeColor:"#ffffff",flakeIndex:999999,minSize:1,maxSize:2,minSpeed:1,maxSpeed:5,round:!1,shadow:!1,collection:!1,image:!1,collectionHeight:40},n={},o=0,s=0,a=0,r=0,l=0,h=function(e,i){for(var t in i)e.hasOwnProperty(t)&&(e[t]=i[t])},d=function(e,i){return Math.round(e+Math.random()*(i-e))},m=function(e,i){for(var t in i)e.style[t]=i[t]+("width"==t||"height"==t?"px":"")},f=function(i,t,n,o){this.id=o,this.x=d(r,a-r),this.y=d(0,s),this.size=t,this.speed=n,this.step=0,this.stepSize=d(1,10)/100,e.collection&&(this.target=canvasCollection[d(0,canvasCollection.length-1)]);var l=null;e.image?(l=new Image,l.src=e.image):(l=document.createElement("div"),m(l,{background:e.flakeColor})),l.className="snowfall-flakes",l.setAttribute("id","flake-"+this.id),m(l,{width:this.size,height:this.size,position:"absolute",top:this.y,left:this.x,fontSize:0,zIndex:e.flakeIndex}),e.round&&m(l,{"-moz-border-radius":~~e.maxSize+"px","-webkit-border-radius":~~e.maxSize+"px",borderRadius:~~e.maxSize+"px"}),e.shadow&&m(l,{"-moz-box-shadow":"1px 1px 1px #555","-webkit-box-shadow":"1px 1px 1px #555",boxShadow:"1px 1px 1px #555"}),i.tagName===document.body.tagName?document.body.appendChild(l):i.appendChild(l),this.element=l,this.update=function(){this.y+=this.speed,this.y>s-(this.size+6)&&this.reset(),this.element.style.top=this.y+"px",this.element.style.left=this.x+"px",this.step+=this.stepSize,this.x+=Math.cos(this.step),(this.x+this.size>a-r||this.x<r)&&this.reset()},this.reset=function(){this.y=0,this.x=d(r,a-r),this.stepSize=d(1,10)/100,this.size=d(100*e.minSize,100*e.maxSize)/100,this.element.style.width=this.size+"px",this.element.style.height=this.size+"px",this.speed=d(e.minSpeed,e.maxSpeed)}},c=function(){for(var e=0;e<t.length;e+=1)t[e].update();l=requestAnimationFrame(function(){c()})};return{snow:function(l,m){for(h(e,m),n=l,s=n.clientHeight,a=n.offsetWidth,n.snow=this,"body"===n.tagName.toLowerCase()&&(r=25),window.onresize=function(){s=n.clientHeight,a=n.offsetWidth},i=0;i<e.flakeCount;i+=1){for(o=0,j=0;j<t.length&&(t[j].id==o&&o++,!(t[j].id>o));j++);t.push(new f(n,d(100*e.minSize,100*e.maxSize)/100,d(e.minSpeed,e.maxSpeed),o)),t.sort(function(e,i){return e.id-i.id})}c()},clear:function(){var e=null;e=n.getElementsByClassName?n.getElementsByClassName("snowfall-flakes"):n.querySelectorAll(".snowfall-flakes");var o=t.slice();for(i=0;i<t.length;i++)for(j=0;j<e.length;j++)if(e[j].id=="flake-"+t[i].id)for(k=0;k<o.length;k++)if(t[i].id==o[k].id){o.splice(k,1);break}o.sort(function(e,i){return e.id-i.id}),t=o;for(var s=e.length;s--;)n.removeChild(e[s]);cancelAnimationFrame(l)}}}var t=[];return{snow:function(i,t){if("string"==typeof t)if(i.length>0)for(var n=0;n<i.length;n++)i[n].snow&&i[n].snow.clear();else i.snow.clear();else if(i.length>0)for(var n=0;n<i.length;n++)(new e).snow(i[n],t);else(new e).snow(i,t)}}}();